[gd_scene load_steps=26 format=3 uid="uid://dc1wladt4tku5"]

[ext_resource type="Script" uid="uid://drvyosjfbj6s1" path="res://Gameplay/Objects/Player/player.gd" id="1_fe24m"]
[ext_resource type="Resource" uid="uid://drxka7vd28per" path="res://Gameplay/Components/WeaponSystem/AttackResources/ranged_config.tres" id="2_22bm7"]
[ext_resource type="Texture2D" uid="uid://b00o67ym823i5" path="res://Assets/sprites/player.png" id="2_nipmo"]
[ext_resource type="Resource" uid="uid://dgf6uldes0h8c" path="res://Gameplay/Components/WeaponSystem/AttackResources/melee_config.tres" id="3_4ibia"]
[ext_resource type="PackedScene" uid="uid://crnq8nj8q6fyi" path="res://Gameplay/Components/WeaponSystem/weapon_system.tscn" id="4_fr334"]
[ext_resource type="PackedScene" uid="uid://6nx3qwdn8iu2" path="res://Gameplay/Components/Squasher/squasher.tscn" id="4_hd2n0"]
[ext_resource type="Script" uid="uid://c04mbejos25wl" path="res://Gameplay/Components/ResourceScripts/weapon_strategy.gd" id="5_3jyhh"]
[ext_resource type="Resource" uid="uid://bqtjlafh48xir" path="res://Gameplay/Components/WeaponSystem/AttackResources/player_base_attack.tres" id="5_75v8f"]
[ext_resource type="PackedScene" uid="uid://bji4uoxn6bckr" path="res://Gameplay/Components/Bobber/bobber.tscn" id="5_npfvi"]
[ext_resource type="Resource" uid="uid://c6eyxcae571no" path="res://Gameplay/Components/WeaponSystem/Strategies/rapid_upgrade_1.tres" id="7_3jyhh"]
[ext_resource type="Resource" uid="uid://dd18nuvy4765" path="res://Gameplay/Components/WeaponSystem/Strategies/damage_upgrade_5.tres" id="8_75v8f"]
[ext_resource type="PackedScene" uid="uid://cubmwwnocg4uk" path="res://Gameplay/Components/Health/health_component.tscn" id="12_8ml8r"]
[ext_resource type="PackedScene" uid="uid://sjg21h3dmyb0" path="res://Gameplay/Components/Hurtbox/hurtbox.tscn" id="13_hejse"]

[sub_resource type="AtlasTexture" id="AtlasTexture_nipmo"]
atlas = ExtResource("2_nipmo")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_hd2n0"]
atlas = ExtResource("2_nipmo")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_07bkq"]
atlas = ExtResource("2_nipmo")
region = Rect2(160, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_75v8f"]
atlas = ExtResource("2_nipmo")
region = Rect2(224, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_fr334"]
atlas = ExtResource("2_nipmo")
region = Rect2(192, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_npfvi"]
atlas = ExtResource("2_nipmo")
region = Rect2(64, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_03dl5"]
atlas = ExtResource("2_nipmo")
region = Rect2(96, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3srqe"]
atlas = ExtResource("2_nipmo")
region = Rect2(128, 32, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_3jyhh"]
atlas = ExtResource("2_nipmo")
region = Rect2(192, 32, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_07bkq"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_nipmo")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hd2n0")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_07bkq")
}],
"loop": true,
"name": &"jump_ascend",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_75v8f")
}],
"loop": true,
"name": &"jump_descend",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fr334")
}],
"loop": false,
"name": &"land",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_npfvi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_03dl5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3srqe")
}],
"loop": true,
"name": &"run",
"speed": 5.0
}, {
"frames": [{
"duration": 0.3,
"texture": SubResource("AtlasTexture_3jyhh")
}],
"loop": false,
"name": &"takeoff",
"speed": 5.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_nipmo"]
radius = 7.0
height = 36.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_22bm7"]
height = 38.0

[node name="Player" type="CharacterBody2D"]
collision_layer = 256
collision_mask = 7
script = ExtResource("1_fe24m")
dodge_shape_height = 10.0
ranged_weapon_config = ExtResource("2_22bm7")
melee_weapon_config = ExtResource("3_4ibia")

[node name="Visuals" type="Node2D" parent="."]
unique_name_in_owner = true

[node name="Body" type="AnimatedSprite2D" parent="Visuals"]
unique_name_in_owner = true
sprite_frames = SubResource("SpriteFrames_07bkq")
animation = &"idle"

[node name="LeftShoulder" type="Sprite2D" parent="Visuals/Body"]
unique_name_in_owner = true
position = Vector2(-6, -14)
texture = ExtResource("2_nipmo")
hframes = 8
vframes = 8

[node name="RightShoulder" type="Sprite2D" parent="Visuals/Body"]
unique_name_in_owner = true
z_index = -10
position = Vector2(6, -14)
texture = ExtResource("2_nipmo")
hframes = 8
vframes = 8

[node name="Head" type="Sprite2D" parent="Visuals"]
unique_name_in_owner = true
z_index = 10
position = Vector2(1, -32)
texture = ExtResource("2_nipmo")
hframes = 8
vframes = 8
frame = 24

[node name="WeaponPivot" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(-6, -8)

[node name="WeaponSprite" type="Sprite2D" parent="WeaponPivot"]
unique_name_in_owner = true
z_index = 15
position = Vector2(8, 0)

[node name="Muzzle" type="Marker2D" parent="WeaponPivot/WeaponSprite"]
unique_name_in_owner = true
position = Vector2(15, 1)

[node name="WeaponSystem" parent="WeaponPivot/WeaponSprite" instance=ExtResource("4_fr334")]
unique_name_in_owner = true
base_attack_data = ExtResource("5_75v8f")
strategies = Array[ExtResource("5_3jyhh")]([ExtResource("7_3jyhh"), ExtResource("8_75v8f")])
base_fire_rate = 0.3

[node name="Collider" type="CollisionShape2D" parent="."]
unique_name_in_owner = true
position = Vector2(1, -2)
shape = SubResource("CapsuleShape2D_nipmo")

[node name="Hurtbox" parent="." node_paths=PackedStringArray("health_component") instance=ExtResource("13_hejse")]
visible = false
collision_layer = 16
collision_mask = 32
health_component = NodePath("../HealthComponent")

[node name="HurtboxCollider" type="CollisionShape2D" parent="Hurtbox"]
unique_name_in_owner = true
position = Vector2(1, -6)
shape = SubResource("CapsuleShape2D_22bm7")
debug_color = Color(0, 0.643181, 0.304689, 0.42)

[node name="RollSprite" type="Sprite2D" parent="."]
unique_name_in_owner = true
visible = false
texture = ExtResource("2_nipmo")
offset = Vector2(0, -4)
hframes = 8
vframes = 8
frame = 2

[node name="SquasherBody" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("4_hd2n0")]
unique_name_in_owner = true
nodes = [NodePath("../Visuals/Body"), NodePath("../Visuals/Head")]

[node name="SquasherGun" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("4_hd2n0")]
unique_name_in_owner = true
nodes = [NodePath("../WeaponPivot/WeaponSprite")]

[node name="BobberHead" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("5_npfvi")]
unique_name_in_owner = true
nodes = [NodePath("../Visuals/Head")]

[node name="BobberShoulders" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("5_npfvi")]
unique_name_in_owner = true
nodes = [NodePath("../Visuals/Body/LeftShoulder"), NodePath("../Visuals/Body/RightShoulder")]
inverse_x_on_odd_nodes = true

[node name="BobberWeapon" parent="." node_paths=PackedStringArray("nodes") instance=ExtResource("5_npfvi")]
unique_name_in_owner = true
nodes = [NodePath("../WeaponPivot/WeaponSprite")]

[node name="HealthComponent" parent="." instance=ExtResource("12_8ml8r")]
unique_name_in_owner = true
max_health = 10.0

[node name="JumpTimerBuffer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="CoyoteTimer" type="Timer" parent="."]
unique_name_in_owner = true
one_shot = true

[node name="DodgeTimer" type="Timer" parent="."]
unique_name_in_owner = true

[node name="DodgeCooldownTimer" type="Timer" parent="."]
unique_name_in_owner = true
